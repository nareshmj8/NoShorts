# ğŸ§© NoShorts - Cursor Code Guidelines

## 1. ğŸ“ File & Folder Structure
- Follow feature-first structure (screens, models, services).
- Each screen/component has its own folder.
- Max 1 widget/class per file. Max file size â‰ˆ 200 lines.
- Example structure:
  - lib/
    - core/ (widgets, theme, helpers)
    - models/ (Plan, Topic, etc.)
    - services/ (supabase, gpt, auth)
    - providers/ (riverpod state)
    - screens/
      - onboarding/
      - home/
      - topic_detail/
      - my_plans/
      - premium/
    - main.dart

---

## 2. ğŸ”„ Modularity
- UI = Stateless/Stateful Widgets.
- Logic = in services (no logic in widgets).
- State = via Riverpod.
- Models = clean, typed, JSON serializable.
- Separate concerns always.

---

## 3. âœ¨ Reusable Components
- Widgets used â‰¥2 times â†’ extract to `core/widgets/`.
- Examples: `GradientButton`, `PlanCard`, `CategoryTile`.

---

## 4. ğŸŒ API & Supabase Rules
- All Supabase/GPT calls go in `services/`.
- Never place HTTP/API calls in UI files.
- Handle loading and error states.
- Use typed models for all data (with fromJson / toJson).

---

## 5. ğŸ§  GPT Plan Generation
- GPT input: category, topic, description (static).
- Output: 6â€“10 steps with YouTube links.
- Handle via `gpt_service.dart`.
- Save generated plan to Supabase.
- API key stored securely (e.g., .env file).

---

## 6. ğŸ’¾ State Management
- Use Riverpod or StateNotifier.
- State to manage: auth, selected category/topic, plan count, premium.
- Avoid `setState` for anything global.

---

## 7. ğŸ’¡ UI/UX
- Follow iOS/Android platform look & feel.
- Light/Dark mode auto switch (based on system).
- Clean layout: one goal per screen.
- Use transitions like `Hero`, fade, or slide animations.

---

## 8. ğŸ§ª Testing & Maintenance
- Widget tests per screen.
- Logic separated and unit-testable.
- Avoid singletons unless needed.
- Document each service with brief usage note.

---

## 9. ğŸ” Auth & Sign-In
- Google Sign-In via Supabase.
- Sign-in occurs on 3rd onboarding screen.
- After logout â†’ go back to onboarding screen 1.
- Logged-in user state should be globally accessible.

---

## 10. ğŸ“¦ Dependency Guidelines
Use only:
- `flutter_riverpod`
- `supabase_flutter`
- `google_sign_in`
- `revenuecat`
- `dio` or `http`
- `flutter_dotenv`

Avoid:
- Heavy UI packages
- Redundant state managers (MobX, Bloc, etc.)

---

## 11. ğŸ” Supabase Plan Sync
- All plans stored in Supabase.
- Realtime sync for both free (max 3/month) and premium users (unlimited).
- On Plan Delete â†’ remove from Supabase.
- On Plan Generation â†’ add to Supabase.

---

## 12. ğŸ§­ Navigation Flow
- Splash â†’ Onboarding 1 â†’ Onboarding 2 â†’ Onboarding 3 (with Sign-In)
- Then Home screen with Categories
- Tap category â†’ show Topics
- Tap topic â†’ Topic Detail screen with static description + Generate Plan
- Tap Generate â†’ call GPT â†’ save to Supabase â†’ go to â€œMy Plansâ€
- My Plans screen shows all user plans from Supabase
- Settings/Account screen for Logout (returns to Onboarding 1)

---

**Cursor Dev Mode Tips:**
- Keep file names descriptive and short (`plan_card.dart`, `auth_service.dart`).
- Use `part of` only if needed; prefer flat files for simplicity.
- Always auto-format (`dart format .`) before commit.
